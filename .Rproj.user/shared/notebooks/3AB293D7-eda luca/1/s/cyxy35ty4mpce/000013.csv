"0","# Assuming sorted_agg_data contains aggregated data sorted by count"
"0",""
"0","# Selecting the top 15 countries and ordering them by count"
"0","top_fifteen <- head(sorted_agg_data[order(sorted_agg_data$count, decreasing = TRUE), ], 15)"
"0",""
"0","# Create an index to mark whether a country is in the top 15 or not"
"0","sorted_agg_data$TopFifteen <- ifelse(sorted_agg_data$Country.Name %in% top_fifteen$Country.Name, sorted_agg_data$Country.Name, ""Other"")"
"0",""
"0","# Order all countries based on their counts"
"0","sorted_agg_data <- sorted_agg_data[order(sorted_agg_data$count, decreasing = TRUE), ]"
"0",""
"0","# Create custom hover text with country names and player counts"
"0","hover_text <- paste(""Country: "", sorted_agg_data$Country.Name, ""<br>"","
"0","                    ""Players: "", sorted_agg_data$count)"
"0",""
"0","# Create an interactive bar plot with updated hover information and remove default hover info"
"0","plotly::plot_ly(x = sorted_agg_data$Country.Name, y = sorted_agg_data$count, type = ""bar"","
"0","                marker = list(color = ifelse(sorted_agg_data$TopFifteen == ""Other"", ""gray"", ""skyblue""),"
"0","                              line = list(color = ""black"", width = 1)),"
"0","                text = hover_text, hoverinfo = ""text"") %>%"
"0","  plotly::layout(title = ""Number of players per country"","
"0","                 xaxis = list(title = ""Country Names"", tickangle = 45, categoryorder = ""array"", categoryarray = sorted_agg_data$Country.Name),"
"0","                 yaxis = list(title = ""Number of players""))"
